<html>
  <head>
    <link href="/css/c3.css" rel="stylesheet" type="text/css">
  </head>
  <body>

    <center><h3>Registro de cambios diarios de entidades en cada uno de los departamentos de la Generalitat de Catalunya</h3></center>

    <div id="chart"></div>
    <script src="/js/d3/d3.min.js"></script>
    <script src="/js/c3.js"></script>
    <script src="/js/extensions/c3ext.js"></script>
    <script src="/js/samples/zoom_reduction.js"></script>
    

    <script>
      var chart = c3.generate({
        bindto: '#chart',
        data: {
          x: 'x',
          url: '/Seismometer_DATA/nanoEntitiesDataInvert.csv',
          //labels: true
        },
        legend: {
          position: 'bottom'
        },
        regions: [{start:'2014-01-08', end:'2014-03-10'}, {start:'2014-12-10', end:'2015-03-05'}],
        axis : {
          x : {
            type : 'timeseries',
            tick : {
              format : '%e %b %y' // https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format
            },
            //extent: ['2014-03-01', '2014-04-20']
          },
          y: {
            label: {
              text: 'Numero de Cambios por Entidad',
              position: 'outer-middle'
            }
          }
        },
        grid: {
          x: {
            lines: [{
               value: '2014-01-11',
               text: 'impacto en los bancos',
               class: 'lineFor20130104'
            },
              {
                value: '2014-10-11',
               text: 'prueba2',
               class: 'lineFor20130104'
             }]
            },
          lines: {
            front: false
          }
        },
        subchart: {
          show: true
        },
        zoom: {
          enabled: true
        },
        size: {
          height: 600
        },
        tooltip: {
          grouped: true
        }
      });

      //Funciont to statt a small tour inside the shown data
      function tour(){

        setTimeout(function () {
          chart.axis.range({max: {x: '2014-03-01'}, min: {x: '2014-04-01'}});
        }, 4000);

        setTimeout(function () {
          chart.axis.range({max: {x: '2014-05-01'}, min: {x: '2014-06-01'}});
        }, 8000);

        setTimeout(function () {
          chart.axis.range({max: {x: '2013-05-26'}, min: {x: '2015-04-16'}});
        }, 10000);
      }

      setTimeout(function () {
        chart.axis.range({max: {x: '2014-03-01'}, min: {x: '2014-04-01'}});
      }, 4000);

      setTimeout(function () {
        chart.axis.range({max: {x: '2014-05-01'}, min: {x: '2014-06-01'}});
      }, 8000);

      setTimeout(function () {
        chart.axis.range({max: {x: '2013-05-26'}, min: {x: '2015-04-16'}});
      }, 10000);

    </script>
    <div>
      <button onclick="tour()">Tour</button>
    </div>
  </body>
</html>
